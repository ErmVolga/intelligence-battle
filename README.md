# intelligence-battle
Школьный проект тг бота.

## Архитектура проекта
```
project/
│
├── bot/
│   ├── __init__.py        # Указывает, что папка bot — это модуль Python.
│   ├── main.py            # Основной файл для запуска бота.
│   ├── handlers/
│   │   ├── __init__.py    # Импорт обработчиков.
│   │   ├── commands.py    # Команды бота (/start, /help и др.).
│   │   ├── game.py        # Логика игры (вопросы, подсчёт очков, вылет игрока).
│   │   ├── admin.py       # Админ-панель (добавление вопросов, статистика).
│   │   └── errors.py      # Обработка ошибок.
│   │
│   ├── keyboards/
│   │   ├── __init__.py    # Импорт всех клавиатур.
│   │   ├── game_kb.py     # Клавиатуры для игры.
│   │   ├── admin_kb.py    # Клавиатуры для админ-панели.
│   │
│   ├── utils/
│       ├── __init__.py    # Импорт утилит.
│       ├── db.py          # Работа с базой данных.
│       ├── config.py      # Настройки проекта (токен, доступы к БД).
│       ├── validators.py  # Проверка входных данных (например, ключей приглашения).
│
├── database/
│   ├── init_db.sql        # Скрипт для создания таблиц в MySQL.
│   ├── questions.csv      # Файл с вопросами для импорта в базу.
│
├── tests/
│   ├── test_game_logic.py # Тесты для игрового процесса.
│   ├── test_db.py         # Тесты для работы с базой данных.
│
├── requirements.txt       # Список зависимостей (aiogram, pymysql, tabulate и др.).
├── README.md              # Описание проекта.
└── .env                   # Переменные окружения (токен бота, доступы к БД).
```

## Описание папок и файлов

### 1. bot/
Главная папка проекта. Содержит файлы бота, обработчиков и вспомогательные модули.

* **main.py:** Точка входа в приложение. Запускает бота, настраивает диспетчер, подключает обработчики.

* **handlers/:** Все логические части бота:
  * **commands.py:** Реализует команды /start, /help и др.
  * **game.py:** Основная игровая логика. Здесь:
    * Вопросы.
    * Подсчёт очков.
    * Логика выбывания игрока с наименьшим количеством очков.
    * Параллельные партии.
  * **admin.py:** Логика админ-панели для управления вопросами и просмотра статистики.
  * **errors.py:** Обработчик ошибок (например, если игрок отправляет неправильный ответ).
* **keyboards/:** <br>
  Хранит клавиатуры для разных частей бота. Например:
  * **game_kb.py**: Кнопки для выбора ответов, начала игры.
  * **admin_kb.py**: Кнопки для управления вопросами.
* **utils/:** <br>
Вспомогательные функции:
  * **db.py:** Модуль для подключения и работы с MySQL (SELECT, INSERT, UPDATE).
  * **config.py:** Настройки проекта. Токен бота, данные для подключения к БД.
  * **validators.py:** Проверка корректности данных, например, ключей приглашения.

### 2. database/
Папка для работы с базой данных.

* **init_db.sql:** Скрипт для создания таблиц MySQL. Например:
``` sql
Копировать код
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50),
    score INT DEFAULT 0
);

CREATE TABLE questions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    question TEXT,
    correct_answer VARCHAR(50),
    wrong_answers JSON
);
```
* **questions.csv:** Файл с вопросами, которые можно импортировать в базу (можно через Pandas, если решишь её использовать).

### 3. tests/
Содержит тесты для проверки игровых механик, работы с базой данных и других модулей.

### 4. Корневые файлы
* **requirements.txt:**
<br>Укажи библиотеки, которые нужно установить:

```plaintext
Копировать код
aiogram==3.x
pymysql
tabulate
python-dotenv
```
* **README.md:**
<br>Добавь описание проекта, инструкцию по установке и запуску.

* **.env:**
<br>Храни чувствительные данные (токен бота, данные БД). Пример:

```plaintext
Копировать код
BOT_TOKEN=токен_вашего_бота
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=пароль
DB_NAME=quiz_game
```

## Взаимодействие компонентов
1. **Игроки** через бота отправляют команды или ответы.
2. **AIogram** получает команды, вызывает соответствующие обработчики.
3. **Обработчики** обращаются к базе данных через модуль db.py.
4. **База данных** хранит информацию о пользователях, вопросах, активных партиях.
5. **Клавиатуры** формируют кнопки для удобного взаимодействия (например, варианты ответов).
6. **Администратор** управляет ботом через админ-панель, добавляет вопросы или смотрит статистику.

## Преимущества такой архитектуры:
* **Модульность:** Каждый компонент (бот, БД, логика) отделён. Легче тестировать и модифицировать.
* **Читаемость:** Код структурирован по папкам, легко найти нужную часть.
* **Гибкость:** Можно легко добавлять новые функции (например, экспорт данных).


<br><br><br><br><br><br><br>
```
04.01 - Я ЕБАНУСЬ!!! Делаю первый день. Начал с изучения aiogram, оказалось надо учить asyncio; начал 
        учить asyncio, оказалось надо учить yield. Часиков через 10 смог перейти к aiogram. Понял,
        что надо учить логгирование + моделирование. В итоге сделал архитектуру + немного кода.
```

